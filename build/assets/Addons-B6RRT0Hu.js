import{j as e}from"./markdown-Bat84yML.js";import{r as i,m as H,ai as he,aj as W,y as be,U as ye,z as K,P as k,V as fe,u as O,J as X,e as je,a9 as q,ak as Ne,al as we,am as ke,an as Se,ao as Ce}from"./lucide-Bfyd0ICn.js";import{M as $}from"./Modal-CuQkZSTM.js";import{u as Ae}from"./index-BOUrY8QV.js";import"./react-vendor-N--QU9DW.js";const Z=[{value:"all",label:"All Categories"},{value:"theme",label:"Themes"},{value:"template",label:"Templates"},{value:"automation",label:"Automation"},{value:"integration",label:"Integrations"},{value:"utility",label:"Utilities"},{value:"other",label:"Other"}],T=({rating:E,onRate:c,interactive:u=!1,size:S="md"})=>{const[y,h]=i.useState(0),C=S==="sm"?"w-3 h-3":S==="lg"?"w-6 h-6":"w-4 h-4";return e.jsx("div",{className:"flex gap-0.5",onMouseLeave:()=>h(0),children:[1,2,3,4,5].map(m=>e.jsx("button",{type:"button",disabled:!u,onClick:()=>u&&c?.(m),onMouseEnter:()=>u&&h(m),className:`${u?"cursor-pointer hover:scale-110":"cursor-default"} transition-transform`,children:e.jsx(Ce,{className:`${C} ${m<=(y||E)?"text-yellow-400 fill-yellow-400":"text-void-muted"}`})},m))})},Te=()=>{const E=Ae(),[c,u]=i.useState("community"),[S,y]=i.useState([]),[h,C]=i.useState(!1),[m,ee]=i.useState(""),[A,te]=i.useState("all"),[R,o]=i.useState(null),[D,P]=i.useState(!1),[f,F]=i.useState(null),[l,L]=i.useState(null),[se,M]=i.useState(new Set),[G,ae]=i.useState([]),[Re,Pe]=i.useState(!1),[z,oe]=i.useState([]),[_,V]=i.useState([]),[ie,J]=i.useState(!1),[g,I]=i.useState(null),[n,v]=i.useState({}),[le,Q]=i.useState(!1),[d,b]=i.useState({name:"",description:"",category:"other",version:"1.0.0",icon_url:"",manifest:{}}),[j,U]=i.useState({rating:5,review:""}),N=async()=>{C(!0);try{const t=window.electronAPI;if(!t?.cloudRequest){o({type:"error",text:"Cloud API not available"});return}const s=c==="system"?"system":"community",a=new URLSearchParams({type:s});A!=="all"&&a.append("category",A),m.trim()&&a.append("search",m.trim());const r=await t.cloudRequest(`/api/addons?${a.toString()}`,{method:"GET"});r?.ok&&Array.isArray(r.addons)?y(r.addons):(y([]),r?.error&&o({type:"error",text:r.error}));const x=await t.cloudRequest("/api/addons/my-installed",{method:"GET"});x?.ok&&Array.isArray(x.addons)&&M(new Set(x.addons.map(ge=>ge.id)));const p=await t.cloudRequest("/api/addons/check-updates",{method:"GET"});p?.ok&&Array.isArray(p.updates)&&V(p.updates),await w()}catch(t){console.error("Failed to load addons:",t),o({type:"error",text:t?.message||"Failed to load addons"}),y([])}finally{C(!1)}},w=async()=>{try{const t=window.electronAPI;if(t?.addonGetStatus){const s=await t.addonGetStatus();ae(s||[])}}catch(t){console.error("Failed to load local addons:",t)}};i.useEffect(()=>{const t=setInterval(w,5e3);return()=>clearInterval(t)},[]),i.useEffect(()=>{N()},[c,A,m]);const ne=async t=>{J(!0);try{const a=await window.electronAPI.cloudRequest(`/api/addons/${t}/ratings`,{method:"GET"});a?.ok&&oe(a.ratings||[])}catch(s){console.error("Failed to load reviews:",s)}finally{J(!1)}},Y=async t=>{try{const s=window.electronAPI,a=await s.cloudRequest(`/api/addons/${t.id}/install`,{method:"POST"});if(a?.ok){if(s.addonInstall){const r=await s.addonInstall(t);if(!r.ok){o({type:"error",text:"Cloud tracker updated, but local installation failed: "+r.error});return}}o({type:"success",text:"Addon installed successfully"}),M(r=>new Set([...r,t.id])),w()}else o({type:"error",text:a?.error||"Failed to install addon"})}catch(s){o({type:"error",text:s?.message||"Failed to install addon"})}},B=async t=>{if(await E.confirm("Are you sure you want to uninstall this addon?"))try{const s=window.electronAPI;s.addonUninstall&&await s.addonUninstall(t);const a=await s.cloudRequest(`/api/addons/${t}/install`,{method:"DELETE"});a?.ok?(o({type:"success",text:"Addon uninstalled successfully"}),M(r=>{const x=new Set(r);return x.delete(t),x}),w()):o({type:"error",text:a?.error||"Failed to update cloud status"})}catch(s){o({type:"error",text:s?.message||"Failed to uninstall addon"})}},re=async(t,s)=>{try{const a=window.electronAPI;a.addonToggle&&(await a.addonToggle(t,s),w())}catch(a){o({type:"error",text:"Failed to toggle addon: "+a.message})}},de=async t=>{try{const a=await window.electronAPI.cloudRequest(`/api/addons/${t}/update`,{method:"POST"});a?.ok?(o({type:"success",text:`Updated to v${a.to_version}`}),V(r=>r.filter(x=>x.addon_id!==t)),N()):o({type:"error",text:a?.error||"Failed to update addon"})}catch(s){o({type:"error",text:s?.message||"Failed to update addon"})}},ce=async()=>{try{const s=await window.electronAPI.cloudRequest("/api/addons/publish",{method:"POST",body:JSON.stringify(d)});s?.ok?(o({type:"success",text:"Addon published successfully!"}),P(!1),b({name:"",description:"",category:"other",version:"1.0.0",icon_url:"",manifest:{}}),N()):o({type:"error",text:s?.error||"Failed to publish addon"})}catch(t){o({type:"error",text:t?.message||"Failed to publish addon"})}},xe=async()=>{if(f)try{const s=await window.electronAPI.cloudRequest(`/api/addons/${f.id}/rate`,{method:"POST",body:JSON.stringify(j)});s?.ok?(o({type:"success",text:"Review submitted!"}),F(null),U({rating:5,review:""}),N()):o({type:"error",text:s?.error||"Failed to submit review"})}catch(t){o({type:"error",text:t?.message||"Failed to submit review"})}},me=async t=>{Q(!0),I(t),v({});try{const s=window.electronAPI;let a={};s.addonGetSettings&&(a=await s.addonGetSettings(t.id));const r=t.manifest?.config||[],x={};r.forEach(p=>{x[p.key]=a[p.key]!==void 0?a[p.key]:p.default??""}),v(x)}catch(s){console.error("Failed to load settings:",s),o({type:"error",text:"Failed to load settings"})}finally{Q(!1)}},ue=async()=>{if(g){console.log("[Addons] Saving settings for:",g.id,n);try{const t=window.electronAPI;if(t.addonSaveSettings){const s=await t.addonSaveSettings(g.id,n);console.log("[Addons] Save result:",s),o({type:"success",text:"Settings saved successfully"}),I(null)}else console.error("[Addons] addonSaveSettings API not found. Please restart the app."),o({type:"error",text:"API not found. Please restart the application to apply updates."})}catch(t){console.error("[Addons] Save error:",t),o({type:"error",text:"Failed to save settings: "+t.message})}}},ve=t=>_.find(s=>s.addon_id===t),pe=R?e.jsxs("div",{className:"border rounded-xl p-4 flex items-start gap-3 mb-4 "+(R.type==="success"?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"),children:[R.type==="success"?e.jsx(H,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}):e.jsx(he,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"text-sm text-void-muted",children:R.text})}),e.jsx("button",{onClick:()=>o(null),className:"text-void-muted hover:text-void-text text-xl leading-none","aria-label":"Dismiss",children:"Ã—"})]}):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-void-text",children:"Addons"}),e.jsx("p",{className:"text-void-muted mt-1",children:"Extend Turbonox with community-built and official addons"})]}),e.jsxs("div",{className:"flex gap-2",children:[_.length>0&&e.jsxs("div",{className:"px-3 py-2 bg-void-cyan/10 border border-void-cyan/20 text-void-cyan rounded-lg font-medium flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),_.length," Update",_.length>1?"s":""]}),e.jsxs("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-gradient-to-r from-void-purple to-void-cyan text-white rounded-lg transition-all font-medium flex items-center gap-2 hover:opacity-90",children:[e.jsx(be,{className:"w-4 h-4"})," Publish Addon"]})]})]}),pe,e.jsxs("div",{className:"flex gap-2 mt-6 border-b border-void-border",children:[e.jsxs("button",{onClick:()=>u("community"),className:`px-4 py-2 font-medium transition-colors relative ${c==="community"?"text-void-cyan":"text-void-muted hover:text-void-text"}`,children:[e.jsx(ye,{className:"w-4 h-4 inline mr-2"}),"Community",c==="community"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-void-cyan"})]}),e.jsxs("button",{onClick:()=>u("system"),className:`px-4 py-2 font-medium transition-colors relative ${c==="system"?"text-void-purple":"text-void-muted hover:text-void-text"}`,children:[e.jsx(K,{className:"w-4 h-4 inline mr-2"}),"System Built",c==="system"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-void-purple"})]}),e.jsxs("button",{onClick:()=>u("managed"),className:`px-4 py-2 font-medium transition-colors relative ${c==="managed"?"text-void-cyan":"text-void-muted hover:text-void-text"}`,children:[e.jsx(k,{className:"w-4 h-4 inline mr-2"}),"Managed",c==="managed"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-void-cyan"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mt-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-void-muted"}),e.jsx("input",{type:"text",placeholder:"Search addons...",value:m,onChange:t=>ee(t.target.value),className:"w-full pl-10 pr-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none"})]}),e.jsx("select",{value:A,onChange:t=>te(t.target.value),className:"px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none",children:Z.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("button",{onClick:N,disabled:h,className:"px-4 py-2 bg-void-panel-2 hover:bg-void-panel-210 border border-void-border text-void-text rounded-lg transition-colors font-medium flex items-center gap-2 disabled:opacity-50",children:e.jsx(O,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]})]}),h?e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-10 text-center",children:[e.jsx(O,{className:"w-8 h-8 text-void-muted mx-auto mb-4 animate-spin"}),e.jsx("div",{className:"text-void-text font-bold text-xl",children:"Loading addons..."})]}):c==="managed"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:G.length===0?e.jsxs("div",{className:"col-span-full bg-void-panel border border-void-border rounded-xl p-10 text-center",children:[e.jsx(k,{className:"w-16 h-16 text-void-muted mx-auto mb-4 opacity-50"}),e.jsx("div",{className:"text-void-text font-bold text-xl",children:"No addons active locally"}),e.jsx("div",{className:"text-void-muted mt-2",children:"Install some addons from the Community or System tabs!"})]}):G.map(t=>e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-5 hover:border-void-border/80 transition-all group",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-void-purple to-void-cyan flex items-center justify-center shrink-0 shadow-lg shadow-void-purple/10",children:t.manifest?.icon?e.jsx("img",{src:t.manifest.icon,className:"w-full h-full rounded-lg object-cover",alt:""}):e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-void-text font-bold truncate text-lg",children:t.manifest?.name||t.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.active?"bg-green-400 animate-pulse":"bg-void-muted"}`}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-semibold text-void-muted",children:t.active?"Active":"Stopped"})]})]}),e.jsx("button",{onClick:()=>re(t.id,!t.active),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all focus:outline-none ${t.active?"bg-void-cyan":"bg-void-panel-2"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${t.active?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("p",{className:"text-void-muted text-sm mb-5 line-clamp-2 h-10",children:t.manifest?.description||"A Turbonox addon extension."}),e.jsxs("div",{className:"pt-4 border-t border-void-border/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(t.manifest?.permissions||[]).slice(0,3).map(s=>e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-void-bg border border-void-border rounded text-void-muted uppercase tracking-tighter",children:s},s)),(t.manifest?.permissions||[]).length>3&&e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 text-void-muted",children:"..."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>B(t.id),className:"p-2 text-void-muted hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"Uninstall",children:e.jsx(X,{className:"w-4 h-4"})}),t.manifest?.config&&t.manifest.config.length>0&&e.jsx("button",{onClick:()=>me(t),className:"p-2 text-void-muted hover:text-void-cyan hover:bg-void-cyan/10 rounded-lg transition-all",title:"Settings",children:e.jsx(je,{className:"w-4 h-4"})})]})]})]},t.id))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:S.map(t=>{const s=se.has(t.id),a=ve(t.id);return e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-5 hover:border-void-border/80 transition-all group",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[t.icon_url?e.jsx("img",{src:t.icon_url,alt:t.name,className:"w-12 h-12 rounded-lg object-cover shadow-lg shadow-black/20"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-void-purple to-void-cyan flex items-center justify-center shrink-0 shadow-lg shadow-void-purple/10",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-void-text font-bold truncate text-lg",children:t.name}),t.is_verified===1&&e.jsx(K,{className:"w-4 h-4 text-void-cyan flex-shrink-0",title:"Verified"})]}),e.jsxs("p",{className:"text-void-muted text-xs truncate",children:["by ",t.author_name||"Unknown"]})]})]}),e.jsx("p",{className:"text-void-muted text-sm mb-4 line-clamp-2 h-10",children:t.description||"No description provided"}),e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{rating:t.avg_rating||0,size:"sm"}),e.jsx("span",{className:"text-void-muted text-xs font-medium",children:t.avg_rating?t.avg_rating.toFixed(1):"0.0"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-void-muted font-semibold uppercase tracking-wider",children:[e.jsx("span",{className:"px-2 py-0.5 bg-void-bg border border-void-border rounded",children:t.category||"other"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-3 h-3"}),t.downloads_count||0]})]})]}),e.jsx("div",{className:"flex gap-2 pt-4 border-t border-void-border/50",children:s?e.jsx(e.Fragment,{children:a?e.jsxs("button",{onClick:()=>de(t.id),className:"flex-1 px-3 py-2 bg-void-cyan/10 border border-void-cyan/20 text-void-cyan rounded-lg transition-all font-bold text-sm flex items-center justify-center gap-2 hover:bg-void-cyan/20",children:[e.jsx(W,{className:"w-4 h-4"})," Update to v",a.latest_version]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{F(t),U({rating:5,review:""})},className:"px-3 py-2 bg-void-panel-2 border border-void-border text-void-text rounded-lg transition-all font-medium flex items-center justify-center gap-2 hover:bg-void-panel-210",title:"Write Review",children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>B(t.id),className:"px-3 py-2 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg transition-all font-medium flex items-center justify-center gap-2 hover:bg-red-500/20",title:"Uninstall",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 px-3 py-2 bg-green-500/10 border border-green-500/20 text-green-400 rounded-lg font-bold text-sm flex items-center justify-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"})," Installed"]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{L(t),ne(t.id)},className:"px-3 py-2 bg-void-panel-2 border border-void-border text-void-text rounded-lg transition-all font-medium flex items-center justify-center gap-2 hover:bg-void-panel-210",children:[e.jsx(we,{className:"w-4 h-4"})," Details"]}),e.jsxs("button",{onClick:()=>Y(t),className:"flex-1 px-3 py-2 bg-void-cyan/10 border border-void-cyan/20 text-void-cyan rounded-lg transition-all font-bold text-sm flex items-center justify-center gap-2 hover:bg-void-cyan/20 shadow-lg shadow-void-cyan/10",children:[e.jsx(q,{className:"w-4 h-4"})," Install"]})]})})]},t.id)})}),D&&e.jsx($,{isOpen:D,onClose:()=>P(!1),title:"Publish Addon",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:t=>b({...d,name:t.target.value}),placeholder:"My Awesome Addon",className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:"Description *"}),e.jsx("textarea",{value:d.description,onChange:t=>b({...d,description:t.target.value}),placeholder:"Describe what your addon does...",rows:3,className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:"Category"}),e.jsx("select",{value:d.category,onChange:t=>b({...d,category:t.target.value}),className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none",children:Z.filter(t=>t.value!=="all").map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:"Version"}),e.jsx("input",{type:"text",value:d.version,onChange:t=>b({...d,version:t.target.value}),placeholder:"1.0.0",className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:"Icon URL"}),e.jsx("input",{type:"text",value:d.icon_url,onChange:t=>b({...d,icon_url:t.target.value}),placeholder:"https://example.com/icon.png",className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 bg-void-panel-2 border border-void-border text-void-text rounded-lg transition-colors font-medium hover:bg-void-panel-210",children:"Cancel"}),e.jsxs("button",{onClick:ce,disabled:!d.name||!d.description,className:"flex-1 px-4 py-2 bg-gradient-to-r from-void-purple to-void-cyan text-white rounded-lg transition-all font-medium flex items-center justify-center gap-2 hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ke,{className:"w-4 h-4"})," Publish"]})]})]})}),f&&e.jsx($,{isOpen:!!f,onClose:()=>F(null),title:`Review ${f.name}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-3",children:"Your Rating"}),e.jsx(T,{rating:j.rating,onRate:t=>U({...j,rating:t}),interactive:!0,size:"lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:"Review (optional)"}),e.jsx("textarea",{value:j.review,onChange:t=>U({...j,review:t.target.value}),placeholder:"Share your experience with this addon...",rows:4,className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none resize-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>F(null),className:"flex-1 px-4 py-2 bg-void-panel-2 border border-void-border text-void-text rounded-lg transition-colors font-medium hover:bg-void-panel-210",children:"Cancel"}),e.jsxs("button",{onClick:xe,className:"flex-1 px-4 py-2 bg-gradient-to-r from-void-purple to-void-cyan text-white rounded-lg transition-all font-medium flex items-center justify-center gap-2 hover:opacity-90",children:[e.jsx(Se,{className:"w-4 h-4"})," Submit Review"]})]})]})}),g&&e.jsx($,{isOpen:!!g,onClose:()=>I(null),title:`Settings: ${g.manifest?.name||"Addon"}`,children:le?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(O,{className:"w-8 h-8 text-void-muted mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-void-muted",children:"Loading settings..."})]}):e.jsxs("div",{className:"space-y-4",children:[g.manifest?.config?.map(t=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-void-text font-medium mb-2",children:t.label||t.key}),t.type==="select"?e.jsx("select",{value:n[t.key]||"",onChange:s=>v({...n,[t.key]:s.target.value}),className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none",children:t.options?.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}):t.type==="color"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:n[t.key]||"#000000",onChange:s=>v({...n,[t.key]:s.target.value}),className:"h-10 w-12 bg-transparent border-0 cursor-pointer"}),e.jsx("input",{type:"text",value:n[t.key]||"",onChange:s=>v({...n,[t.key]:s.target.value}),className:"flex-1 px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none"})]}):t.type==="range"?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:t.min,max:t.max,step:t.step||1,value:n[t.key]||t.min||0,onChange:s=>v({...n,[t.key]:Number(s.target.value)}),className:"flex-1"}),e.jsx("span",{className:"text-void-text w-12 text-right",children:n[t.key]})]}):t.type==="boolean"?e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${n[t.key]?"bg-void-cyan":"bg-void-panel-2"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${n[t.key]?"translate-x-4":""}`})}),e.jsx("span",{className:"text-void-muted",children:"Enabled"}),e.jsx("input",{type:"checkbox",className:"hidden",checked:!!n[t.key],onChange:s=>v({...n,[t.key]:s.target.checked})})]}):e.jsx("input",{type:t.type||"text",value:n[t.key]||"",onChange:s=>v({...n,[t.key]:s.target.value}),className:"w-full px-4 py-2 bg-void-bg border border-void-border rounded-lg text-void-text placeholder-void-muted focus:border-void-cyan focus:ring-1 focus:ring-void-cyan/50 transition-all outline-none"})]},t.key)),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-void-border/50",children:[e.jsx("button",{onClick:()=>I(null),className:"flex-1 px-4 py-2 bg-void-panel-2 border border-void-border text-void-text rounded-lg transition-colors font-medium hover:bg-void-panel-210",children:"Cancel"}),e.jsx("button",{onClick:ue,className:"flex-1 px-4 py-2 bg-gradient-to-r from-void-purple to-void-cyan text-white rounded-lg transition-all font-medium flex items-center justify-center gap-2 hover:opacity-90",children:"Save Changes"})]})]})}),l&&e.jsx($,{isOpen:!!l,onClose:()=>L(null),title:l.name,size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[l.icon_url?e.jsx("img",{src:l.icon_url,alt:l.name,className:"w-20 h-20 rounded-xl object-cover"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gradient-to-br from-void-purple to-void-cyan flex items-center justify-center",children:e.jsx(k,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-void-text",children:l.name}),e.jsxs("p",{className:"text-void-muted",children:["by ",l.author_name||"Unknown"]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx(T,{rating:l.avg_rating||0}),e.jsxs("span",{className:"text-void-muted text-sm",children:[l.avg_rating?l.avg_rating.toFixed(1):"0.0"," (",l.rating_count||0," reviews)"]})]})]}),e.jsxs("button",{onClick:()=>{Y(l),L(null)},className:"px-4 py-2 bg-gradient-to-r from-void-purple to-void-cyan text-white rounded-lg font-medium",children:[e.jsx(q,{className:"w-4 h-4 inline mr-2"})," Install"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-void-text font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-void-muted",children:l.description||"No description"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-void-bg rounded-lg p-3",children:[e.jsx("div",{className:"text-void-text font-bold",children:l.downloads_count||0}),e.jsx("div",{className:"text-void-muted text-xs",children:"Downloads"})]}),e.jsxs("div",{className:"bg-void-bg rounded-lg p-3",children:[e.jsx("div",{className:"text-void-text font-bold capitalize",children:l.category}),e.jsx("div",{className:"text-void-muted text-xs",children:"Category"})]}),e.jsxs("div",{className:"bg-void-bg rounded-lg p-3",children:[e.jsx("div",{className:"text-void-text font-bold",children:l.is_verified?"Yes":"No"}),e.jsx("div",{className:"text-void-muted text-xs",children:"Verified"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-void-text font-medium mb-3",children:"Reviews"}),ie?e.jsx("div",{className:"text-void-muted text-center py-4",children:"Loading reviews..."}):z.length===0?e.jsx("div",{className:"text-void-muted text-center py-4",children:"No reviews yet"}):e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:z.map(t=>e.jsxs("div",{className:"bg-void-bg rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.user_avatar?e.jsx("img",{src:t.user_avatar,alt:"",className:"w-6 h-6 rounded-full"}):e.jsx("div",{className:"w-6 h-6 rounded-full bg-void-panel-2"}),e.jsx("span",{className:"text-void-text font-medium text-sm",children:t.user_name}),e.jsx(T,{rating:t.rating,size:"sm"})]}),t.review&&e.jsx("p",{className:"text-void-muted text-sm",children:t.review})]},t.id))})]})]})})]})};export{Te as default};
