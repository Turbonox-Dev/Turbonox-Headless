import{j as e}from"./markdown-Bat84yML.js";import{r as i,z as f,I as Z,U as P,A as S,aC as R,V as ee,m as L,aD as se,d as te,aE as re,aF as de,c as ae,G as oe,aG as ie,_ as I,aH as le,aI as ne}from"./lucide-Bfyd0ICn.js";import"./react-vendor-N--QU9DW.js";const ue=()=>{const[M,p]=i.useState(!1),[j,o]=i.useState(null),[n,N]=i.useState("overview"),[d,m]=i.useState({enabled:!1,text:"",action:{enabled:!0,label:"",url:"",openExternal:!0},dismissible:!0,animation:"fade",width:"full",styles:{backgroundColor:"#ffffff",textColor:"#000000",highlightColor:"#000000"}}),[b,F]=i.useState(null),[k,z]=i.useState([]),[y,B]=i.useState(""),[W,_]=i.useState(!1),[a,U]=i.useState(null),[t,w]=i.useState(null),[$,E]=i.useState(!1),[A,C]=i.useState(""),[c,h]=i.useState([]);i.useEffect(()=>{n==="overview"&&G(),n==="users"&&g(),n==="announcement"&&K()},[n]),i.useEffect(()=>{if(t?.user?.restricted_features||t?.auto_restricted_features)try{const s=typeof t.user.restricted_features=="string"?JSON.parse(t.user.restricted_features):t.user.restricted_features,r=t.auto_restricted_features||[],l=[...new Set([...Array.isArray(s)?s:[],...r])];h(l)}catch{h([])}else h([])},[t]),i.useEffect(()=>{if(n==="users"){const s=setTimeout(g,500);return()=>clearTimeout(s)}},[y]);const G=async()=>{p(!0);try{const s=await window.electronAPI.controlPlaneAdminStats();F(s)}catch(s){console.error("Stats error:",s)}finally{p(!1)}},g=async()=>{_(!0);try{const s=await window.electronAPI.controlPlaneAdminUsers(y);z(s?.users||[])}catch(s){console.error("Users error:",s)}finally{_(!1)}},v=async s=>{E(!0);try{const r=await window.electronAPI.controlPlaneAdminUserDetail(s);w(r)}catch{o({type:"error",message:"Failed to fetch user details"})}finally{E(!1)}},V=s=>{U(s),w(null),v(s.id)},T=()=>{U(null),w(null),C("")},K=async()=>{p(!0);try{const s=await window.electronAPI.getAnnouncement();s&&m(r=>({...r,...s,action:{...r.action,...s.action},styles:{...r.styles,...s.styles}}))}catch{o({type:"error",message:"Failed to load announcement settings"})}finally{p(!1)}},H=async()=>{p(!0);try{const s=await window.electronAPI.controlPlaneAnnouncementUpdate(d);if(s.ok)o({type:"success",message:"Announcement updated successfully"});else throw new Error(s.error||"Update failed")}catch(s){o({type:"error",message:s.message})}finally{p(!1)}},x=async(s,r,l)=>{if(!s)return;const Y=r==="ban"?l?"BAN":"UNBAN":r==="role"?`set role to ${{super_admin:"ADMIN",moderator:"MODERATOR",user:"USER"}[l]||l}`:r==="restrict"?l?"RESTRICT":"UNRESTRICT":"UPDATE";if(confirm(`Are you sure you want to ${Y} this user?`))try{const u={};r==="ban"&&(u.is_banned=l),r==="role"&&(u.role=l),r==="restrict"&&(u.is_restricted=l),r==="restricted_features"&&(u.restricted_features=l),r==="max_instances"&&(u.max_instances=l);const D=await window.electronAPI.controlPlaneAdminUserUpdate(s,u);D.ok?(o({type:"success",message:"User updated"}),g(),a?.id===s&&v(s),window.dispatchEvent(new CustomEvent("void-cloud-profile-updated"))):o({type:"error",message:D.error||"Update failed"})}catch(u){o({type:"error",message:u.message||"Action failed"})}},J=async()=>{if(A.trim())try{const s=await window.electronAPI.controlPlaneAdminWarnUser(a.id,A);s.ok?(o({type:"success",message:"Warning sent"}),C(""),v(a.id),window.dispatchEvent(new CustomEvent("void-cloud-profile-updated"))):o({type:"error",message:s.error||"Failed to send warning"})}catch(s){o({type:"error",message:s.message||"Failed to send warning"})}},X=async()=>{if(confirm("Are you sure you want to clear ALL warnings for this user? This will restore their functional privileges."))try{const s=await window.electronAPI.controlPlaneAdminUserUpdate(a.id,{clear_warnings:!0});s.ok?(o({type:"success",message:"Warnings cleared"}),v(a.id),g(),window.dispatchEvent(new CustomEvent("void-cloud-profile-updated"))):o({type:"error",message:s.error||"Failed to clear warnings"})}catch(s){o({type:"error",message:s.message||"Failed to clear warnings"})}},q=async s=>{if(confirm("Revoke this session? User will be logged out on that device."))try{const r=await window.electronAPI.controlPlaneAdminRevokeSession(s);r.ok?(o({type:"success",message:"Session revoked"}),v(a.id)):o({type:"error",message:r.error||"Failed to revoke session"})}catch(r){o({type:"error",message:r.message||"Failed to revoke session"})}},Q=()=>e.jsxs("div",{className:"flex gap-4 border-b border-void-border mb-6",children:[e.jsxs("button",{onClick:()=>N("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${n==="overview"?"border-void-cyan text-void-cyan":"border-transparent text-void-muted hover:text-void-text"}`,children:[e.jsx(S,{size:16})," Overview"]}),e.jsxs("button",{onClick:()=>N("users"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${n==="users"?"border-void-cyan text-void-cyan":"border-transparent text-void-muted hover:text-void-text"}`,children:[e.jsx(P,{size:16})," Users"]}),e.jsxs("button",{onClick:()=>N("announcement"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${n==="announcement"?"border-void-cyan text-void-cyan":"border-transparent text-void-muted hover:text-void-text"}`,children:[e.jsx(ne,{size:16})," Announcements"]})]});return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-12",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-void-text flex items-center gap-3",children:[e.jsx(f,{className:"w-8 h-8 text-void-cyan"}),"Admin Panel"]}),e.jsx("p",{className:"text-void-muted mt-2",children:"Global system administration"})]})}),e.jsx(Q,{}),j&&e.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-3 ${j.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-300":"bg-red-500/10 border-red-500/20 text-red-300"}`,children:[e.jsx(Z,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:j.message}),e.jsx("button",{onClick:()=>o(null),className:"ml-auto text-current opacity-50 hover:opacity-100",children:"Ã—"})]}),n==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-void-muted font-medium",children:"Total Users"}),e.jsx(P,{className:"text-void-cyan opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold text-void-text",children:b?.users||"-"}),e.jsx("div",{className:"text-xs text-void-muted mt-2",children:"Registered accounts"})]}),e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-void-muted font-medium",children:"Active Sessions"}),e.jsx(S,{className:"text-emerald-400 opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold text-void-text",children:b?.active_sessions||"-"}),e.jsx("div",{className:"text-xs text-void-muted mt-2",children:"Currently active sessions"})]}),e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-void-muted font-medium",children:"Banned Users"}),e.jsx(R,{className:"text-red-400 opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold text-void-text",children:b?.banned_users||"-"}),e.jsx("div",{className:"text-xs text-void-muted mt-2",children:"Suspended accounts"})]}),e.jsxs("div",{className:"col-span-full mt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-void-text mb-4",children:"Recent Signups"}),e.jsx("div",{className:"bg-void-panel border border-void-border rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-void-panel-2 border-b border-void-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted",children:"Name"}),e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted",children:"Email"}),e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted",children:"Joined"})]})}),e.jsxs("tbody",{className:"divide-y divide-void-border",children:[b?.recent_signups?.map(s=>e.jsxs("tr",{className:"hover:bg-void-panel-2/50",children:[e.jsx("td",{className:"px-6 py-4 text-void-text",children:s.display_name}),e.jsx("td",{className:"px-6 py-4 text-void-muted",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-void-muted",children:new Date(s.created_at).toLocaleDateString()})]},s.id)),!b?.recent_signups?.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-void-muted",children:"No users found"})})]})]})})]})]}),n==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-void-muted w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:y||"",onChange:s=>B(s.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-void-panel border border-void-border rounded-xl text-void-text focus:border-void-cyan outline-none"})]})}),e.jsx("div",{className:"bg-void-panel border border-void-border rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-void-panel-2 border-b border-void-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted",children:"User"}),e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted",children:"Role"}),e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted",children:"Status"}),e.jsx("th",{className:"px-6 py-3 font-medium text-void-muted text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-void-border",children:W?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-void-muted animate-pulse",children:"Loading users..."})}):k.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-void-muted",children:"No users found"})}):k.map(s=>e.jsxs("tr",{className:"hover:bg-void-panel-2/50 group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar_url,className:"w-8 h-8 rounded-full bg-slate-800"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-void-text flex items-center gap-2",children:[s.display_name,s.is_google&&e.jsx("div",{className:"w-4 h-4 bg-white rounded-full flex items-center justify-center p-0.5",title:"Google Login",children:e.jsx("img",{src:"https://www.google.com/favicon.ico",className:"w-full h-full"})})]}),e.jsx("div",{className:"text-xs text-void-muted",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:s.role==="super_admin"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-purple-500/10 text-purple-400 text-xs font-bold border border-purple-500/20",children:[e.jsx(f,{size:10})," ADMIN"]}):s.role==="moderator"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-500/10 text-blue-400 text-xs font-bold border border-blue-500/20",children:[e.jsx(f,{size:10})," MOD"]}):e.jsx("span",{className:"text-void-muted text-xs",children:"User"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2",children:s.is_banned?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-500/10 text-red-400 text-xs font-bold border border-red-500/20",children:[e.jsx(R,{size:10})," BANNED"]}):s.is_restricted?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-orange-500/10 text-orange-400 text-xs font-bold border border-orange-500/20",children:[e.jsx(S,{size:10})," RESTRICTED"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-emerald-500/10 text-emerald-400 text-xs font-bold border border-emerald-500/20",children:[e.jsx(L,{size:10})," Active"]})})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>V(s),className:"p-1.5 bg-void-panel-2 hover:bg-void-border rounded text-void-text text-xs px-3 font-medium transition-colors",children:"Manage"})})})]},s.id))})]})})]}),n==="announcement"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-void-text font-bold text-lg mb-2",children:[e.jsx(se,{className:"w-5 h-5 text-void-cyan"}),"Content"]}),e.jsxs("button",{onClick:H,disabled:M,className:"flex items-center gap-2 px-4 py-2 bg-void-cyan text-void-bg rounded-lg font-bold hover:shadow-lg transition-all text-xs",children:[e.jsx(te,{className:"w-4 h-4"})," Save"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-void-bg rounded-xl border border-void-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-void-text font-bold",children:"Visibility"}),e.jsx("div",{className:"text-xs text-void-muted",children:"Toggle the announcement banner globally"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.enabled,onChange:s=>m({...d,enabled:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-void-panel-2 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-void-cyan"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-void-muted",children:"Main Text"}),e.jsx("textarea",{value:d.text||"",onChange:s=>m({...d,text:s.target.value}),className:"w-full px-4 py-3 bg-void-bg border border-void-border rounded-xl text-void-text focus:outline-none focus:border-void-cyan transition-colors",placeholder:"e.g. Server maintenance scheduled...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-void-muted",children:"Action Label"}),e.jsx("input",{type:"text",value:d.action.label||"",onChange:s=>m({...d,action:{...d.action,label:s.target.value}}),className:"w-full px-4 py-3 bg-void-bg border border-void-border rounded-xl text-void-text focus:outline-none focus:border-void-cyan"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-void-muted",children:"Action URL"}),e.jsx("input",{type:"text",value:d.action.url||"",onChange:s=>m({...d,action:{...d.action,url:s.target.value}}),className:"w-full px-4 py-3 bg-void-bg border border-void-border rounded-xl text-void-text focus:outline-none focus:border-void-cyan"})]})]})]}),e.jsxs("div",{className:"bg-void-panel border border-void-border rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-void-text font-bold text-lg mb-2",children:[e.jsx(re,{className:"w-5 h-5 text-void-cyan"}),"Visual Config"]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["backgroundColor","textColor","highlightColor"].map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-void-muted uppercase",children:s.replace("Color","")}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"color",value:d.styles[s]||"#000000",onChange:r=>m({...d,styles:{...d.styles,[s]:r.target.value}}),className:"w-8 h-8 rounded border border-void-border cursor-pointer bg-transparent"})})]},s))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-void-muted",children:"Animation"}),e.jsxs("select",{value:d.animation||"fade",onChange:s=>m({...d,animation:s.target.value}),className:"w-full px-4 py-3 bg-void-bg border border-void-border rounded-xl text-void-text outline-none",children:[e.jsx("option",{value:"fade",children:"Fade In"}),e.jsx("option",{value:"slide",children:"Slide Down"}),e.jsx("option",{value:"pulse",children:"Pulse"}),e.jsx("option",{value:"none",children:"None"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-void-muted",children:"Width"}),e.jsxs("select",{value:d.width||"full",onChange:s=>m({...d,width:s.target.value}),className:"w-full px-4 py-3 bg-void-bg border border-void-border rounded-xl text-void-text outline-none",children:[e.jsx("option",{value:"full",children:"Full Width"}),e.jsx("option",{value:"contained",children:"Contained"}),e.jsx("option",{value:"compact",children:"Compact (Floating)"})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-void-border/50 text-center",children:[e.jsx("div",{className:"text-xs text-void-muted mb-2 uppercase tracking-widest",children:"Preview"}),e.jsxs("div",{className:"transition-all duration-300 mx-auto rounded-lg shadow-lg overflow-hidden py-2 px-4 cursor-pointer",style:{backgroundColor:d.styles.backgroundColor,color:d.styles.textColor,width:"90%"},children:[e.jsx("span",{className:"opacity-90",children:d.text||"Preview text..."}),d.action.label&&e.jsx("span",{className:"ml-3 font-bold underline",style:{color:d.styles.highlightColor},children:d.action.label})]})]})]})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-void-bg border border-void-border rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-void-border flex items-center justify-between sticky top-0 bg-void-bg z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:a.avatar_url,className:"w-12 h-12 rounded-full bg-void-panel"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-void-text flex items-center gap-2",children:[a.display_name,a.is_google&&e.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center p-0.5",title:"Google Login",children:e.jsx("img",{src:"https://www.google.com/favicon.ico",className:"w-full h-full"})})]}),e.jsx("p",{className:"text-void-muted text-sm",children:a.email})]})]}),e.jsx("button",{onClick:T,className:"p-2 hover:bg-void-panel rounded-lg text-void-muted hover:text-void-text",children:e.jsx(de,{className:"w-5 h-5"})})]}),$?e.jsx("div",{className:"p-12 text-center text-void-muted",children:"Loading user details..."}):t?e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-void-muted uppercase tracking-wider",children:"Account Status"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("button",{onClick:()=>x(a.id,"ban",!t.user.is_banned),className:`px-4 py-2 rounded-xl text-sm font-bold border transition-colors ${t.user.is_banned?"bg-emerald-500/10 border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20":"bg-red-500/10 border-red-500/30 text-red-400 hover:bg-red-500/20"}`,children:t.user.is_banned?"UNBAN ACCOUNT":"BAN ACCOUNT"}),e.jsxs("div",{className:"w-full bg-void-panel p-5 rounded-2xl border border-void-border mt-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-bold text-void-text",children:"Feature Access Control"}),e.jsx("p",{className:"text-[10px] text-void-muted uppercase tracking-wider",children:"Granular Permissions"})]}),e.jsx("button",{onClick:()=>x(a.id,"restricted_features",c),className:"px-3 py-1.5 bg-void-cyan/10 hover:bg-void-cyan/20 text-void-cyan text-xs font-bold rounded-lg border border-void-cyan/20 transition-all",children:"SAVE PERMISSIONS"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"create_instance",label:"Servers",icon:ae},{id:"manage_network",label:"Network",icon:oe},{id:"create_backup",label:"Backups",icon:ie},{id:"use_ai",label:"AI Center",icon:I},{id:"manage_nodes",label:"Nodes",icon:le}].map(s=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${c.includes(s.id)?"bg-red-500/5 border-red-500/20":"bg-void-bg/50 border-void-border hover:border-void-cyan/30"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${c.includes(s.id)?"bg-red-500/10 text-red-400":"bg-void-panel text-void-muted"}`,children:e.jsx(s.icon,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xs font-bold truncate ${c.includes(s.id)?"text-red-300":"text-void-text"}`,children:s.label}),e.jsx("div",{className:"text-[10px] text-void-muted uppercase",children:t?.auto_restricted_features?.includes(s.id)?"Auto-Blocked":c.includes(s.id)?"Blocked":"Allowed"})]}),e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${c.includes(s.id)?"bg-red-500 text-white border-red-500":"bg-void-bg border-void-border"}`,children:c.includes(s.id)&&e.jsx(L,{size:10})}),e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:r=>{const l=r.target.checked?[...c,s.id]:c.filter(O=>O!==s.id);h(l)},className:"hidden"})]},s.id))}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{onClick:()=>x(a.id,"restrict",!t.user.is_restricted),className:`w-full py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${t.user.is_restricted?"bg-orange-500/10 border-orange-500/30 text-orange-400 hover:bg-orange-500/20":"bg-void-bg border-void-border text-void-muted hover:text-void-text hover:border-void-muted"}`,children:[e.jsx(f,{size:14}),t.user.is_restricted?"DISABLE ACCOUNT LOCKDOWN":"ENABLE FULL ACCOUNT LOCKDOWN"]}),e.jsx("p",{className:"text-[9px] text-void-muted text-center mt-2 italic",children:"Lockdown overrides all granular permissions"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.user.role==="user"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(a.id,"role","moderator"),className:"px-4 py-2 rounded-xl text-sm font-bold border transition-colors bg-blue-500/10 border-blue-500/30 text-blue-400 hover:bg-blue-500/20",children:"PROMOTE TO MODERATOR"}),e.jsx("button",{onClick:()=>x(a.id,"role","super_admin"),className:"px-4 py-2 rounded-xl text-sm font-bold border transition-colors bg-purple-500/10 border-purple-500/30 text-purple-400 hover:bg-purple-500/20",children:"PROMOTE TO ADMIN"})]}),t.user.role==="moderator"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(a.id,"role","super_admin"),className:"px-4 py-2 rounded-xl text-sm font-bold border transition-colors bg-purple-500/10 border-purple-500/30 text-purple-400 hover:bg-purple-500/20",children:"PROMOTE TO ADMIN"}),e.jsx("button",{onClick:()=>x(a.id,"role","user"),className:"px-4 py-2 rounded-xl text-sm font-bold border transition-colors bg-orange-500/10 border-orange-500/30 text-orange-400 hover:bg-orange-500/20",children:"DEMOTE TO USER"})]}),t.user.role==="super_admin"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(a.id,"role","moderator"),className:"px-4 py-2 rounded-xl text-sm font-bold border transition-colors bg-blue-500/10 border-blue-500/30 text-blue-400 hover:bg-blue-500/20",children:"DEMOTE TO MODERATOR"}),e.jsx("button",{onClick:()=>x(a.id,"role","user"),className:"px-4 py-2 rounded-xl text-sm font-bold border transition-colors bg-orange-500/10 border-orange-500/30 text-orange-400 hover:bg-orange-500/20",children:"DEMOTE TO USER"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-void-panel p-4 rounded-xl border border-void-border",children:[e.jsx("div",{className:"text-sm font-bold text-void-muted",children:"Max Instances"}),e.jsx("input",{type:"number",defaultValue:t.user.max_instances||0,onBlur:s=>x(a.id,"max_instances",parseInt(s.target.value)),className:"w-24 px-3 py-1.5 bg-void-bg border border-void-border rounded-lg text-void-text text-sm focus:border-void-cyan outline-none"}),e.jsx("div",{className:"text-xs text-void-muted ml-auto",children:"0 = Unlimited"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-void-muted uppercase tracking-wider",children:"Send Warning"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Warning message...",value:A||"",onChange:s=>C(s.target.value),className:"flex-1 px-4 py-2 bg-void-panel border border-void-border rounded-xl text-void-text focus:border-void-cyan outline-none"}),e.jsx("button",{onClick:J,className:"px-4 py-2 bg-void-cyan text-void-bg font-bold rounded-xl text-sm hover:opacity-90",children:"SEND"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-void-muted uppercase tracking-wider text-emerald-400",children:"Active Sessions"}),e.jsx("div",{className:"bg-void-panel border border-void-border rounded-xl overflow-hidden",children:t.sessions.length===0?e.jsx("div",{className:"p-4 text-center text-void-muted text-sm",children:"No active sessions"}):e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-void-panel-2 font-medium text-void-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"ID"}),e.jsx("th",{className:"px-4 py-2",children:"Created"}),e.jsx("th",{className:"px-4 py-2",children:"Expires"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-void-border",children:t.sessions.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3 font-mono text-xs",children:[s.id.slice(0,8),"..."]}),e.jsx("td",{className:"px-4 py-3 text-void-muted",children:new Date(s.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-void-muted",children:new Date(s.expires_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{onClick:()=>q(s.id),className:"text-red-400 hover:text-red-300 text-xs font-bold",children:"REVOKE"})})]},s.id))})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-bold text-void-muted uppercase tracking-wider text-orange-400",children:["Warnings History (",t.user.warning_count||0,")"]}),t.user.warning_count>0&&e.jsx("button",{onClick:X,className:"text-[10px] font-bold text-red-400 hover:text-red-300 transition-colors uppercase tracking-widest px-2 py-1 bg-red-500/10 rounded-lg border border-red-500/20",children:"Clear All"})]}),e.jsx("div",{className:"bg-void-panel border border-void-border rounded-xl overflow-hidden max-h-48 overflow-y-auto",children:t.warnings.length===0?e.jsx("div",{className:"p-4 text-center text-void-muted text-sm",children:"No warnings found"}):e.jsx("div",{className:"divide-y divide-void-border",children:t.warnings.map(s=>e.jsxs("div",{className:"p-3 text-sm",children:[e.jsx("div",{className:"font-medium text-void-text",children:s.message}),e.jsxs("div",{className:"text-xs text-void-muted flex justify-between mt-1",children:[e.jsxs("span",{children:["By: ",s.created_by||"System"]}),e.jsx("span",{children:new Date(s.created_at).toLocaleString()})]})]},s.id))})})]}),t.auto_restricted_features?.length>0&&e.jsxs("div",{className:"p-4 bg-orange-500/5 border border-orange-500/20 rounded-xl space-y-2",children:[e.jsxs("div",{className:"text-[10px] font-bold text-orange-400 uppercase tracking-[0.2em] flex items-center gap-2",children:[e.jsx(I,{size:12}),"Automated Standing Restrictions Active"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.auto_restricted_features.map(s=>e.jsx("div",{className:"px-2 py-1 bg-orange-500/10 border border-orange-500/20 rounded-lg text-[10px] text-orange-300 font-bold uppercase",children:s.replace("_"," ")},s))})]})]}):null,e.jsx("div",{className:"p-4 border-t border-void-border bg-void-panel/50 rounded-b-2xl",children:e.jsx("button",{onClick:T,className:"w-full py-3 bg-void-panel-2 hover:bg-void-border rounded-xl text-void-muted hover:text-void-text font-bold transition-colors",children:"Close"})})]})})]})};export{ue as default};
